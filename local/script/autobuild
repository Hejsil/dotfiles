#!/bin/sh

cmd=$*
[ -z "$cmd" ] && [ -f 'Cargo.toml' ] &&
    cmd='cargo clippy && cargo build'
[ -z "$cmd" ] && [ -f 'build.zig' ] &&
    cmd='fd . zig-cache --change-older-than 7days --type f -x rm && zig build test install --summary all'

fd | exec entr -crs "$cmd"
